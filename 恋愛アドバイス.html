<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹æ„›ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãã˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
            background-color: #ffefef;
        }
        .omikuji-box {
            display: inline-block;
            padding: 20px;
            border: 2px solid #ff1493;
            border-radius: 10px;
            background-color: #fff0f5;
        }
        .omikuji-result {
            margin-top: 20px;
            font-size: 1.2em;
            color: #d00;
        }
        .history {
            margin-top: 30px;
            text-align: left;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button.disabled {
            background-color: #d3a8c2; /* è–„æš—ã„ãƒ”ãƒ³ã‚¯ */
            cursor: not-allowed;
        }
        .retry-box {
            position: fixed;
            bottom: 10px;
            right: 10px;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: #ff69b4;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        .slider.round {
            border-radius: 34px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <h1>æ‹æ„›ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãã˜</h1>
    <div class="omikuji-box">
        <label class="switch">
            <input type="checkbox" id="ai-switch">
            <span class="slider round"></span>
        </label>
        <span>AIã®å›ç­”ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>
        <button id="draw-button" onclick="drawOmikuji()">æ‹æ„›ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã‚‚ã‚‰ã†</button>
        <button id="clear-history-button" onclick="clearHistory()">å±¥æ­´å‰Šé™¤</button>
        <div id="result" class="omikuji-result"></div>
	<div id="lucky-item" class="lucky-item"></div>
        <div id="retry-message">1æ—¥ï¼‘å›å¼•ã‘ã‚‹ã‚ˆï¼ï¼</div>
    </div>
    <div class="history" id="history"></div>
    <div class="retry-box">
        <input type="text" id="retry-input" placeholder="ãŠã¿ãã˜æ–‡ä½œæˆè€…:èŒ‚å‘‚ã€å¶ºå±±">
        <button onclick="checkRetry()">æ‹æ„›ãŒä¸Šæ‰‹ãè¡Œãã¾ã™ã‚ˆã†ã«ğŸ˜ŒğŸ™ğŸ»ğŸ’­</button>
    </div>

    <script>
        const basicResults = [
            "å¤§å¤§å‰: äººç”Ÿãªã‚“ã¦æ¥½ã—ã‚“ã è€…å‹ã¡ã ã‚ï¼",
            "å¤§å‰: ã©ã†å‘Šã‚‹ã‹ã¯ã€ã‚ãªãŸæ¬¡ç¬¬ï¼",
            "ä¸­å‰: ç·Šå¼µã™ã‚‹ã®ã¯ã€ç›¸æ‰‹ã«æ°—æŒã¡ãŒã‚ã‚‹ã‹ã‚‰ã§ã™",
            "å°å‰: å½“ãŸã£ã¦ãã ã‘ã‚",
            "æœ«å‰: ç›¸æ‰‹ã«åŸ·ç€ã—ã™ããªã„",
            "å‡¶: ã€Œã‚‚ã†ã€ãªã‚“ã¦è¨€ã†ãªï¼1ç§’ã‚’å¤§åˆ‡ã«ï¼",
            "å¤§å‰: ãªã«ã‚‚è¡Œå‹•ã—ã¦ã„ãªã„ã®ã«å¶ã†ã¨æ€ã†ãªï¼",
            "ä¸­å‰: ä¸€æ—¦ã€å¥½ããƒãƒ¬ã—ã‚ã‚„ï¼",
            "å°å‰: ä»Šã‚’æ¥½ã—ã‚“ã§ãã ã•ã„",
            "æœ«å‰: å¤±æ•—ã‚’ãŸãã•ã‚“ã—ã¦æˆé•·ã—ã‚ˆã†ï¼",
            "å¤§å‰: é€²å±•ã—ãŸã‹ã£ãŸã‚‰ã—ãŸã»ã†ãŒã„ã„",
            "å‡¶: ã‚‚ã†å¥½ããƒãƒ¬ã—ã‚ã‚ˆã€‚ã©ã†ã—ã¦ã—ãªã„ã‚“ï¼Ÿï¼Ÿã¾ã˜å…¨ç„¶è¡Œå‹•ã—ã¦ãªãã­ï¼Ÿï¼Ÿ",
            "å¤§å‰: ã‚ã¨ã§å¾Œæ‚”ã™ã‚‹ã‚ˆã‚Šã‚‚ã„ã†ã¹ãï¼",
            "ä¸­å‰: æ‹æ„›ã¯ç´ ç›´ãŒä¸€ç•ª",
            "å°å‰: ç«‹ã¡å‘ã‹ã£ã¦ãã ã‘ã‚ˆï¼ï¼",
            "æœ«å‰: ä»Šã®ã†ã¡ã«ãŸãã•ã‚“å¤±æ•—ã—ã¦ãã ã•ã„ï¼ï¼ãã‚Œã§æˆé•·ã§ãã¾ã™ï¼",
            "å¤§å‰: æœ‰è¨€å®Ÿè¡Œ",
            "ä¸­å‰: åˆ‡ã‚Šæ›¿ãˆå¤§åˆ‡",
            "å°å‰: ãƒ€ãƒ¡ã§ã‚‚ã‚ãã‚‰ã‚ã‚“ãª",
            "æœ«å‰: è‡ªåˆ†ã®ä¼ãˆãŸã„æ€ã„ã‚’ä¼ãˆãªã€‚è‡ªåˆ†ã®æ°—æŒã¡ã‚’ã—ã£ã‹ã‚Šä¼ãˆã‚Œã°å‘ã“ã†ã‚‚ã—ã£ã‹ã‚Šè€ƒãˆã¦è¿”äº‹ãã‚Œã‚‹ã¨æ€ã†ã‚ˆã€‚",
            "ä¸­å‰: æ‹æ„›ã¯ç´ ç›´ãŒä¸€ç•ª"
        ];

        const aiResults = [
            "å¤§å‰: ã‚ãªãŸã®é­…åŠ›ãŒè¼ã„ã¦ã„ã¾ã™ï¼è‡ªä¿¡ã‚’æŒã£ã¦è¡Œå‹•ã—ã¾ã—ã‚‡ã†ã€‚",
            "å¤§å‰: ä»Šæ—¥ã¯æœ€é«˜ã®æ—¥ã§ã™ã€‚å¿ƒã‚’é–‹ã„ã¦æ–°ã—ã„å‡ºä¼šã„ã‚’æ¥½ã—ã‚“ã§ã€‚",
            "å¤§å‰: å¤§åˆ‡ãªäººã«ã‚ãªãŸã®æ°—æŒã¡ã‚’æ­£ç›´ã«ä¼ãˆã¦ã¿ã¦ãã ã•ã„ã€‚",
            "å¤§å‰: ç©æ¥µçš„ã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãã£ã¨è‰¯ã„çµæœãŒå¾…ã£ã¦ã„ã¾ã™ã€‚",
            "ä¸­å‰: ç„¦ã‚‰ãšã€ã‚†ã£ãã‚Šã¨é–¢ä¿‚ã‚’ç¯‰ã„ã¦ã„ãã¾ã—ã‚‡ã†ã€‚",
            "ä¸­å‰: ç›¸æ‰‹ã‚’ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹å§¿å‹¢ãŒå¤§åˆ‡ã§ã™ã€‚",
            "å°å‰: è‡ªç„¶ä½“ã§æ¥ã™ã‚‹ã“ã¨ã§ã€ç›¸æ‰‹ã‚‚å¿ƒã‚’é–‹ãã§ã—ã‚‡ã†ã€‚",
            "å°å‰: ä¸€æ­©ãšã¤å‰é€²ã™ã‚‹ã“ã¨ãŒæˆåŠŸã®éµã§ã™ã€‚",
            "æœ«å‰: å°ã•ãªå„ªã—ã•ãŒå¤§ããªå–œã³ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚",
            "æœ«å‰: è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§ã€ç„¡ç†ã›ãšé€²ã‚“ã§ãã ã•ã„ã€‚",
            "å‡¶: ä»Šæ—¥ã¯ç„¡ç†ã›ãšã€ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦éã”ã—ã¾ã—ã‚‡ã†ã€‚",
            "å‡¶: æ€ã„é€šã‚Šã«ãªã‚‰ãªãã¦ã‚‚ã€ç„¦ã‚‰ãšæ¬¡ã®ãƒãƒ£ãƒ³ã‚¹ã‚’å¾…ã£ã¦ã€‚",
            "å¤§å‰: è‡ªä¿¡ã‚’æŒã£ã¦æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã—ã‚ˆã†ï¼",
            "ä¸­å‰: ç©æ¥µçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒè‰¯ã„çµæœã‚’ç”Ÿã‚€ã§ã—ã‚‡ã†ã€‚",
            "å°å‰: å°‘ã—ãšã¤è·é›¢ã‚’ç¸®ã‚ã¦ã¿ã¦ã€‚",
            "æœ«å‰: ç›¸æ‰‹ã‚’ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹å§¿å‹¢ãŒå¤§åˆ‡ã§ã™ã€‚",
            "å‡¶: ä»Šæ—¥ã¯ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦è‡ªåˆ†ã®æ™‚é–“ã‚’å¤§åˆ‡ã«ã€‚",
            // ã“ã“ã«ä»–ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¿½åŠ ï¼ˆçœç•¥ã®ãŸã‚ä¸€éƒ¨ã®ã¿è¨˜è¼‰ï¼‰
        ];

	// ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆ
	const luckyItems = [
   		 "ãƒ”ãƒ³ã‚¯è‰²ã®èŠ±",
   		 "ãƒãƒƒã‚¯ãƒ¬ã‚¹",
  		  "æŒ‡è¼ª",
 		   "ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³",
    		"ã¡ã„ã‹ã‚",
 		   "ã¯ã¡ã‚ã‚Œ",
  		  "ãƒ”ãƒ³ã‚¯ç³»ã®è‰²ã®ã‚·ãƒ£ãƒ¼ãƒ—ãƒšãƒ³ã‚·ãƒ«",
 		   "ãƒãƒ•ãƒ©ãƒ¼",
		    "æ‰‹è¢‹",
 		   "ãƒ©ãƒ–ã‚½ãƒ³ã‚°"
	
	];





      function drawOmikuji() {
    const aiSwitch = document.getElementById("ai-switch").checked;
    const results = aiSwitch ? [...basicResults, ...aiResults] : basicResults;

    // æ—¥ä»˜ã¨æ™‚é–“ã‚’å–å¾—
    const now = new Date();
    const today = now.toLocaleDateString();
    const time = now.toLocaleTimeString();

    // ãƒ©ãƒ³ãƒ€ãƒ ã§çµæœã‚’é¸ã¶
    const randomIndex = Math.floor(Math.random() * results.length);
    const result = results[randomIndex];

    // ãƒ©ãƒ³ãƒ€ãƒ ã§ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚’é¸ã¶
    const randomItem = luckyItems[Math.floor(Math.random() * luckyItems.length)];

    // çµæœã¨ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç”»é¢ã«è¡¨ç¤º
    document.getElementById("result").innerText = result;
    document.getElementById("lucky-item").textContent = `ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ : ${randomItem}`;

    // å±¥æ­´ã‚’è¡¨ç¤º
    const history = document.getElementById("history");
    const entry = document.createElement("div");
    entry.innerText = `${today} ${time} - ${result}`;
    history.appendChild(entry);

    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
    localStorage.setItem("lastDrawDate", today);
    localStorage.setItem("lastResult", result);
    localStorage.setItem("lastTime", time);

    // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ã—ã€å†è©¦è¡Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
    const drawButton = document.getElementById("draw-button");
    drawButton.disabled = true;
    drawButton.classList.add("disabled");
    document.getElementById("retry-message").innerText = "ã¾ãŸæ˜æ—¥æŒ‘æˆ¦ã—ã¦ã­ï¼";
}


        // 1æ—¥1å›ã«åˆ¶é™ã™ã‚‹ãŸã‚ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨
                window.onload = function () {
            const lastDrawDate = localStorage.getItem('lastDrawDate');
            const today = new Date().toLocaleDateString();

            if (lastDrawDate === today) {
                const drawButton = document.getElementById("draw-button");
                drawButton.disabled = true;
                drawButton.classList.add("disabled");
                document.getElementById("retry-message").innerText = "ã¾ãŸæ˜æ—¥æŒ‘æˆ¦ã—ã¦ã­ï¼";
                
                const result = localStorage.getItem('lastResult');
                const time = localStorage.getItem('lastTime');
                const history = document.getElementById("history");
                const entry = document.createElement("div");
                entry.innerText = `${today} ${time} - ${result}`;
                history.appendChild(entry);
		// ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚‚è¡¨ç¤ºã™ã‚‹ const randomItem = luckyItems[Math.floor(Math.random() * luckyItems.length)]; document.getElementById("lucky-item").textContent = `ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ : ${randomItem}`
            }
        };

        function checkRetry() {
    const input = document.getElementById("retry-input").value.toLowerCase();
    const drawButton = document.getElementById("draw-button");

    if (input === "retry") {
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ãƒªã‚»ãƒƒãƒˆ
        localStorage.removeItem("lastDrawDate");
        localStorage.removeItem("lastResult");
        localStorage.removeItem("lastTime");

        // ãƒœã‚¿ãƒ³ã‚’å†ã³æœ‰åŠ¹åŒ–
        drawButton.disabled = false;
        drawButton.classList.remove("disabled");
        document.getElementById("retry-message").innerText = "1æ—¥ï¼‘å›å¼•ã‘ã‚‹ã‚ˆï¼ï¼";

        alert("ã‚‚ã†ä¸€åº¦å¼•ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼");
    } else if (input === "big") {
        const now = new Date();
        const today = now.toLocaleDateString();
        const time = now.toLocaleTimeString();

        // ç‰¹åˆ¥ãªçµæœï¼ˆå¤§å¤§å‰ï¼‰ã‚’å¼·åˆ¶è¡¨ç¤º
        const result = aiResults[0];

        // ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã‚‚å†ç”Ÿæˆ
        const randomItem = luckyItems[Math.floor(Math.random() * luckyItems.length)];
        document.getElementById("result").innerText = result;
        document.getElementById("lucky-item").textContent = `ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ : ${randomItem}`;

        // å±¥æ­´ã«è¿½åŠ 
        const history = document.getElementById("history");
        const entry = document.createElement("div");
        entry.innerText = `${today} ${time} - ${result}`;
        history.appendChild(entry);
    }

    // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
    document.getElementById("retry-input").value = "";
}


        function clearHistory() {
            const history = document.getElementById("history");
            while (history.firstChild) {
                history.removeChild(history.firstChild);
            }
        }
    </script>
</body>
</html>
